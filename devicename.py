import broadlink

DEVICE_NAME = "Your_Device_Name_Here"  # Replace with your device's actual name

# IR Codes
ir_codes = {
    'Power On': b'&\x00P\x00\x00\x01 \x8f\x10\x13\x10\x13\x10\x13\x104\x104\x11\x12\x11\x12\x113\x104\x105\x104\x103\x11\x12\x114\x113\x10\x13\x104\x10\x13\x10\x13\x104\x113\x11\x12\x11\x12\x11\x12\x10\x13\x104\x105\x0f\x14\x0f\x13\x104\x113\x114\x0f\x00\x04Y\x00\x01 E\x0f\x00\r\x05',
    'Power Off': b'&\x00P\x00\x00\x01 \x8e\x11\x12\x11\x12\x11\x12\x114\x0f5\x10\x13\x10\x13\x103\x114\x104\x104\x105\x10\x13\x0f4\x113\x11\x12\x114\x0f\x14\x0f\x14\x0f5\x103\x11\x12\x11\x12\x11\x12\x11\x12\x114\x0f5\x10\x13\x10\x13\x103\x114\x104\x10\x00\x04Y\x00\x01\x1fD\x11\x00\r\x05',
    'Temp Up': b'&\x00P\x00\x00\x01 \x8f\x10\x13\x10\x13\x10\x13\x104\x104\x10\x13\x10\x13\x104\x113\x105\x0f5\x103\x11\x12\x114\x104\x10\x13\x104\x10\x13\x104\x10\x13\x10\x13\x10\x13\x10\x13\x10\x13\x10\x13\x104\x10\x13\x104\x105\x0f4\x113\x114\x0f\x00\x04Y\x00\x01 E\x0f\x00\r\x05'
}

# Discover Broadlink devices on the network
devices = broadlink.discover(timeout=5)

# Find the device by name
device = None
for dev in devices:
    if hasattr(dev, "name") and dev.name == DEVICE_NAME:
        device = dev
        break

if device:
    device.auth()
    print(f"Connected to {DEVICE_NAME}")

    # Function to send IR command
    def send_ir(command):
        if command in ir_codes:
            device.send_data(ir_codes[command])
            print(f"Sent command: {command}")
        else:
            print(f"Command '{command}' not found.")

    # Example Usage
    send_ir('Power On')  # Turn AC on
    send_ir('Temp Up')   # Increase temperature
else:
    print(f"Device '{DEVICE_NAME}' not found!")
